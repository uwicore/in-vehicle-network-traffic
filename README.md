... more details coming

# in-vehicle-network-traffic
This repository includes in-vehicle network data traffic generated using a Connected and Automated Mobility (CAM) platform that seamlessly combines CARLA’s realistic 3D driving environment with the autonomous driving capabilities of the Autoware AD software stack.

# Scenarios
Tests have been conducted in different driving scenarios, such as urban roads, highway and intersections. These scenarios are part of the CARLA 
- Town 1: small town with numerous T-junctions and a variety of buildings, surrounded by coniferous trees and featuring several small bridges spanning across a river that divides the town into 2 halves.
  
![Town01](https://github.com/user-attachments/assets/0c90f7cc-791e-4735-bc35-b9bb9b2eb297)

- Town 2: small town with numerous T-junctions and a variety of buildings, there are patches of coniferous trees, a park and a residential and commercial area.
  
![Town02](https://github.com/user-attachments/assets/c7008730-1b5d-4bf3-bfdb-2eee2615f693)

- Town 3: larger town with features of a downtown urban area. The map includes some interesting road network features such as a roundabout, underpasses and overpasses. The town also includes a raised metro track and a large building under construction.
  
![Town03](https://github.com/user-attachments/assets/a0fe53a8-db07-4b82-bf75-c33caabedeea)

- Town 6: low density town set into a coniferous landscape exhibiting a multitude of large, 4-6 lane roads and special junctions like the Michigan Left.

![Town06](https://github.com/user-attachments/assets/545ab096-7688-455b-8653-18445946d20b)

# Sensors configuration
The L3 ego-vehicle is equipped with 5 cameras, 5 radas, 1 lidar, 1 IMU and 1 GNSS. Details about the configurations of each of these sensors can be found in the README files available for the different scenarios tested. 
![SesnorDeployment_L3_5Cams_5Rad_1Lid_1IMU_1GNSS](https://github.com/user-attachments/assets/12e86a4e-4425-4451-b7a5-0fc88eb68f71)

# Recorded topic list
The released dataset is based on a list of ROS2 topics that are recorded in Autoware. In total, the following 47 topics are recorded:
1. /clock 
2. /localization/kinematic_state 
3. /localization/acceleration 
4. /map/vector_map 
5. /sensing/gnss/ublox/nav_sat_fix 
6. /sensing/imu/tamagawa/imu_raw 
7. /sensing/gnss/pose_with_covariance 
8. /sensing/imu/imu_data 
9. /sensing/radar/front_center/pointcloud 
10. /sensing/radar/front_right/pointcloud 
11. /sensing/radar/front_left/pointcloud 
12. /sensing/radar/rear_left/pointcloud 
13. /sensing/radar/rear_right/pointcloud 
14. /sensing/radar/front_center/objects 
15. /sensing/radar/front_left/objects 
16. /sensing/radar/front_right/objects 
17. /sensing/radar/rear_left/objects 
18. /sensing/radar/rear_right/objects 
19. /sensing/camera/camera0/image_raw 
20. /sensing/camera/camera1/image_raw 
21. /sensing/camera/camera2/image_raw 
22. /sensing/camera/camera3/image_raw 
23. /sensing/camera/camera4/image_raw 
24. /perception/object_recognition/detection/rois0 
25. /perception/object_recognition/detection/rois1 
26. /perception/object_recognition/detection/rois2 
27. /perception/object_recognition/detection/rois3 
28. /perception/object_recognition/detection/rois4 
29. /sensor/lidar/front 
30. /perception/object_recognition/detection/centerpoint/validation/objects 
31. /perception/object_recognition/detection/objects 
32. /perception/object_recognition/objects 
33. /perception/occupancy_grid_map/map 
34. /perception/obstacle_segmentation/pointcloud 
35. /planning/scenario_planning/max_velocity_candidates 
36. /planning/scenario_planning/status/stop_reasons 
37. /planning/scenario_planning/lane_driving/trajectory 
38. /planning/scenario_planning/trajectory 
39. /control/trajectory_follower/control_cmd 
40. /control/command/control_cmd 
41. /control/command/emergency_cmd 
42. /control/command/hazard_lights_cmd 
43. /control/command/turn_indicators_cmd 
44. /vehicle/status/hazard_lights_status 
45. /vehicle/status/steering_status 
46. /vehicle/status/turn_indicators_status 
47. /vehicle/status/velocity_status

The following figure shows the topic in the AUTOWARE architecture: 
![in-vehicle topics_v0 4](https://github.com/user-attachments/assets/99813147-156b-4eb0-9cf2-c747c03b0e78)

# Output traces

## "AutowareTrace_0.csv": 
The main file generated by the ros2bag. It contains information about all recorded topics
- Column A: An integer identifier of the messge recorded
- Column B ("frame_id"): The name of the frame the message publisher is attached to (a frame is a coordinate system that defines the 	position of a specific element inside the vehicle's model in Autoware. Each sensor has its own frame they are positioned on). Some messages do not contain a frame ID, so the default is MISSING HEADER
- Column C ("topic"): The name of the topic the recorded message was published on
- Column D ("msg_type"): The type of the message recorded. Message types are defined inside of ROS and contain the structure of the message's fields. The content of this column is the name of the message type
- Column E ("timestamp"): The simulation timestamp present in the message's header. It is set the moment the message is published inside Autoware
- Column F ("msg_size"): The size of the message's payload in bytes
- Column G ("bag_timestamp"): The timestamp at which the ros2bag recorded the message. It is checked at the moment of recording from the computer's real time clock. It doesn't always respect the time order of Column 5
 
## - "AutowareTrace_0_Accel.csv"
It contains the content of each message published under the topic "/localization/acceleration", which tracks the acceleration of the vehicle throughout the scenario
- Column A: An integer identifier of the messge recorded
- Column B ("topic"): The name of the topic the recorded message was published on
- Column C ("msg_type"): The type of the message recorded. Message types are defined inside of ROS and contain the structure of the message's fields. The content of this column is the name of the message type
- Column D ("timestamp"): The simulation timestamp present in the message's header. It is set the moment the message is published inside Autoware
- Column E ("bag_timestamp"): The timestamp at which the ros2bag recorded the message. It is checked at the moment of recording from the computer's real time clock. It doesn't always respect the time order of Column 4
- Columns F, G, H ("accel_linear"): The linear acceleration vector
- Columns I, J, K ("accel_angular"): The angular acceleration vector (rotational acceleration of the vehicle)
- Column L ("accel_covariance"): Covariance matrix of the measured acceleration

## "AutowareTrace_0_Kinematics.csv" 
It contains the kinematic information of the Ego vehicle throughout the scenario, its position and orientation, and also the force (Twist) applied to it
- Column A: An integer identifier of the messge recorded
- Column B ("topic"): The name of the topic the recorded message was published on
- Column C ("msg_type"): The type of the message recorded. Message types are defined inside of ROS and contain the structure of the message's fields. The content of this column is the name of the message type
- Column D ("timestamp"): The simulation timestamp present in the message's header. It is set the moment the message is published inside Autoware
- Column E ("bag_timestamp"): The timestamp at which the ros2bag recorded the message. It is checked at the moment of recording from the computer's real time clock. It doesn't always respect the time order of Column 4
- Columns F, G, H, I, J, K, L, M: Ego vehicle's pose, which contains its position, orientation (in quaternion form), and a covariance matrix of the measured values
- Columns N, O, P, Q, R, S, T: Ego vehicle's twist (force applied to it), which contains a linear vector, an angular vector and a covariance matrix

## "AutowareTrace_0_Reports.csv" 
It contains the content of the messages published in two topics, /vehicle/status/velocity_status and /vehicle/status/steering_status
- Column A: An integer identifier of the messge recorded
- Column B ("topic"): The name of the topic the recorded message was published on. It alternates between the two mentioned above
- Column C ("msg_type"): The type of the message recorded. Message types are defined inside of ROS and contain the structure of the message's fields. The content of this column is the name of the message type
- Column D ("timestamp"): The simulation timestamp present in the message's header (in seconds). It is set the moment the message is published inside Autoware
- Column E ("bag_timestamp"): The timestamp (in seconds) at which the ros2bag recorded the message. It is checked at the moment of recording from the computer's real time clock. It doesn't always respect the time order of Column 4
- Column F ("steering_angle"): The angle of the steering wheel. It's only valid when the topic is "steering_status", otherwise it's set to -1
- Columns G, H, I ("longitudinal_velocity", "lateral_velocity" and "heading_rate"): The Ego's velocity components. They are only valid if the topic is "velocity_status", otherwise set to -1

## "metadata.yaml"
Metadata of the recorded ros2bag trace. Contains serialization information regarding each topic monitored, as well as the number of messages recorded per topic

## "sumoTrace.xml"
This file contains the positions and speeds of every vehicle that exists in a specific timestamp
- The file contains blocks called <timestep time="value">, that represent a time step of the Sumo Co-Simulation
- Each timestep block contains a list of <vehicle> lines, which include information about each vehicle that existed in that timestep
- The information contained for each vehicle includes id, position, speed and vehicle model

## Sumo trajectories (See "vehicle_trajectories.png")
- The dummies' trajectories are represented with small dots of different colors
- The Ego's trajectory is represented with bright red squares of greater size than the dummies
- The labels mark the START of each trajectory
- The end of each trajectory (Ego and Dummy) is represented with a slightly bigger X (it is difficult to see in the dummies case)
- The python file to generate this image is included in the FinalTraces Drive folder

# License
This dataset is licensed under the [Creative Commons Attribution 4.0 International License (CC BY 4.0)](./LICENSE).  
You are free to share, adapt, and use the data for any purpose, including commercial use, as long as you provide appropriate credit.

## Acknowledgment of Tools
The dataset was generated using the following open-source software:
- **CARLA Simulator** – [MIT License] (https://github.com/carla-simulator/carla/blob/0.9.15/LICENSE)
- **Autoware AD Stack** – [Apache License 2.0] (https://github.com/autowarefoundation/autoware/blob/2024.01/LICENSE)

These tools were used solely to generate synthetic data. The dataset itself does not contain code from CARLA or Autoware, but we gratefully acknowledge their role in enabling this work.

# Citation
If you use these in-vehicle network traces in your research or projects, please cite the following paper:

> L. Lusvarghi, B. Coll-Perales, J. Gozálvez, K. Aghababaiyan, M. Almela, M. Sepulcre, “Characterization of In-Vehicle Network Sensor Data Traffic in Autonomous Vehicles,”  Proceedings of the 15th IEEE Vehicular Networking Conference (VNC 2024), 29–31 May 2024, Kobe, Japan.

```bibtex
@inproceedings{Lusvarghi2024,
  author    = {L. Lusvarghi and B. Coll-Perales and J. Gozálvez and K. Aghababaiyan and M. Almela and M. Sepulcre},
  title     = {Characterization of In-Vehicle Network Sensor Data Traffic in Autonomous Vehicles},
  booktitle = {Proceedings of the 15th IEEE Vehicular Networking Conference (VNC 2024)},
  year      = {2024},
  month     = {May},
  pages     = {29--31},
  address   = {Kobe, Japan}
}
